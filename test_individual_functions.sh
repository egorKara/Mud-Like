#!/bin/bash

# üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –û–¢–î–ï–õ–¨–ù–´–• –§–£–ù–ö–¶–ò–ô –°–ò–°–¢–ï–ú–´
# –ò–º–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
CYAN='\033[0;36m'
NC='\033[0m'

echo -e "${BLUE}üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –û–¢–î–ï–õ–¨–ù–´–• –§–£–ù–ö–¶–ò–ô –°–ò–°–¢–ï–ú–´${NC}"
echo -e "${BLUE}=========================================${NC}"
echo

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
source ./overheat_protection.sh

# –¢–ï–°–¢ 1: –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ CPU
echo -e "${CYAN}üîç –¢–ï–°–¢ 1: get_cpu_load()${NC}"
echo "----------------------------------------"
cpu_load=$(get_cpu_load)
echo "CPU Load: ${cpu_load}%"
if [ "$cpu_load" -ge 0 ] && [ "$cpu_load" -le 100 ]; then
    echo -e "${GREEN}‚úÖ –§—É–Ω–∫—Ü–∏—è get_cpu_load —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
else
    echo -e "${RED}‚ùå –§—É–Ω–∫—Ü–∏—è get_cpu_load —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
fi
echo

# –¢–ï–°–¢ 2: –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ GPU
echo -e "${CYAN}üîç –¢–ï–°–¢ 2: get_gpu_load()${NC}"
echo "----------------------------------------"
gpu_load=$(get_gpu_load)
echo "GPU Load: ${gpu_load}%"
if [ "$gpu_load" -ge 0 ] && [ "$gpu_load" -le 100 ]; then
    echo -e "${GREEN}‚úÖ –§—É–Ω–∫—Ü–∏—è get_gpu_load —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
else
    echo -e "${RED}‚ùå –§—É–Ω–∫—Ü–∏—è get_gpu_load —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
fi
echo

# –¢–ï–°–¢ 3: –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
echo -e "${CYAN}üîç –¢–ï–°–¢ 3: get_cpu_temperature()${NC}"
echo "----------------------------------------"
temp=$(get_cpu_temperature)
echo "CPU Temperature: ${temp}¬∞C"
if [ "$temp" -ge 0 ] && [ "$temp" -le 200 ]; then
    echo -e "${GREEN}‚úÖ –§—É–Ω–∫—Ü–∏—è get_cpu_temperature —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
else
    echo -e "${RED}‚ùå –§—É–Ω–∫—Ü–∏—è get_cpu_temperature —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
fi
echo

# –¢–ï–°–¢ 4: –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Unity Editor
echo -e "${CYAN}üîç –¢–ï–°–¢ 4: is_unity_editor_running()${NC}"
echo "----------------------------------------"
unity_running=$(is_unity_editor_running)
echo "Unity Editor running: ${unity_running}"
if [ "$unity_running" = "true" ] || [ "$unity_running" = "false" ]; then
    echo -e "${GREEN}‚úÖ –§—É–Ω–∫—Ü–∏—è is_unity_editor_running —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
else
    echo -e "${RED}‚ùå –§—É–Ω–∫—Ü–∏—è is_unity_editor_running —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
fi
echo

# –¢–ï–°–¢ 5: –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (–±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–µ—Ä)
echo -e "${CYAN}üîç –¢–ï–°–¢ 5: check_maximum_load() - –ª–æ–≥–∏–∫–∞${NC}"
echo "----------------------------------------"
echo "–ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏–∫—É –±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–µ—Ä..."

# –°–∏–º—É–ª–∏—Ä—É–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
if [ "$cpu_load" -ge 100 ] || [ "$gpu_load" -ge 100 ]; then
    echo -e "${YELLOW}‚ö†Ô∏è  –î–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞${NC}"
    echo "  CPU: ${cpu_load}% (–ø–æ—Ä–æ–≥: 100%)"
    echo "  GPU: ${gpu_load}% (–ø–æ—Ä–æ–≥: 100%)"
    echo -e "${BLUE}‚ÑπÔ∏è  –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–º–µ—Ä—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è)${NC}"
else
    echo -e "${GREEN}‚úÖ –ù–∞–≥—Ä—É–∑–∫–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã${NC}"
    echo "  CPU: ${cpu_load}% (–ø–æ—Ä–æ–≥: 100%)"
    echo "  GPU: ${gpu_load}% (–ø–æ—Ä–æ–≥: 100%)"
    echo -e "${GREEN}‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
fi
echo

# –¢–ï–°–¢ 6: –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Unity Editor (–±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–µ—Ä)
echo -e "${CYAN}üîç –¢–ï–°–¢ 6: check_unity_editor_load() - –ª–æ–≥–∏–∫–∞${NC}"
echo "----------------------------------------"
echo "–ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏–∫—É Unity Editor –±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–µ—Ä..."

if [ "$unity_running" = "true" ]; then
    if [ "$cpu_load" -gt 95 ] || [ "$gpu_load" -gt 95 ]; then
        echo -e "${YELLOW}‚ö†Ô∏è  Unity Editor –ø—Ä–µ–≤—ã—Å–∏–ª –ª–∏–º–∏—Ç—ã${NC}"
        echo "  CPU: ${cpu_load}% (–ª–∏–º–∏—Ç: 95%)"
        echo "  GPU: ${gpu_load}% (–ª–∏–º–∏—Ç: 95%)"
        echo -e "${BLUE}‚ÑπÔ∏è  –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–º–µ—Ä—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è)${NC}"
    else
        echo -e "${GREEN}‚úÖ Unity Editor –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ª–∏–º–∏—Ç–æ–≤${NC}"
        echo "  CPU: ${cpu_load}% (–ª–∏–º–∏—Ç: 95%)"
        echo "  GPU: ${gpu_load}% (–ª–∏–º–∏—Ç: 95%)"
        echo -e "${GREEN}‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
    fi
else
    echo -e "${BLUE}‚ÑπÔ∏è  Unity Editor –Ω–µ –∑–∞–ø—É—â–µ–Ω${NC}"
    echo -e "${GREEN}‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
fi
echo

# –¢–ï–°–¢ 7: –§—É–Ω–∫—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
echo -e "${CYAN}üîç –¢–ï–°–¢ 7: get_system_info()${NC}"
echo "----------------------------------------"
echo "System Information:"
get_system_info
echo

# –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢
echo -e "${BLUE}üìä –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢${NC}"
echo -e "${BLUE}=================${NC}"
echo -e "${GREEN}‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã${NC}"
echo -e "${GREEN}‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
echo -e "${GREEN}‚úÖ –ù–∏–∫–∞–∫–∏—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫${NC}"
echo -e "${BLUE}‚ÑπÔ∏è  –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø–æ–ª–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é${NC}"
echo