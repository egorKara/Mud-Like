# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –î–ò–†–ï–ö–¢–ò–í –ü–†–ï–ü–†–û–¶–ï–°–°–û–†–ê

## üìÖ **–î–ê–¢–ê:** 2024-07-29
## üéØ **–°–¢–ê–¢–£–°:** –í—Å–µ –æ—à–∏–±–∫–∏ CS1027 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

---

## üö® **–ü–†–û–ë–õ–ï–ú–ê CS1027**

### **–û—à–∏–±–∫–∞:**
```
Assets/Scripts/Core/AI/UnityAIAssistant.cs(182,9): error CS1027: #endif directive expected
```

### **–ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–∏–≤:**

#### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- **3 –¥–∏—Ä–µ–∫—Ç–∏–≤—ã `#if UNITY_EDITOR`** (—Å—Ç—Ä–æ–∫–∏ 9, 22, 186)
- **3 –¥–∏—Ä–µ–∫—Ç–∏–≤—ã `#endif`** (—Å—Ç—Ä–æ–∫–∏ 12, 396, 426)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ë–ª–æ–∫ `#if UNITY_EDITOR` (—Å—Ç—Ä–æ–∫–∞ 22) –Ω–µ –∏–º–µ–ª —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ `#endif`

#### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- **3 –¥–∏—Ä–µ–∫—Ç–∏–≤—ã `#if UNITY_EDITOR`** (—Å—Ç—Ä–æ–∫–∏ 9, 22, 188)
- **4 –¥–∏—Ä–µ–∫—Ç–∏–≤—ã `#endif`** (—Å—Ç—Ä–æ–∫–∏ 12, 182, 398, 428)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –±–ª–æ–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–∫—Ä—ã—Ç—ã

---

## ‚úÖ **–ü–†–ò–ú–ï–ù–ï–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï**

### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∞—è –¥–∏—Ä–µ–∫—Ç–∏–≤–∞ `#endif` –≤ —Å—Ç—Ä–æ–∫–µ 182:

```csharp
        }
        
        #endif  // ‚Üê –î–û–ë–ê–í–õ–ï–ù–û: –∑–∞–∫—Ä—ã–≤–∞–µ—Ç #if UNITY_EDITOR (—Å—Ç—Ä–æ–∫–∞ 22)
        
        #endregion
        
        #region Private Methods
        
        #if UNITY_EDITOR  // ‚Üê –°—Ç—Ä–æ–∫–∞ 188 (–±—ã–ª–∞ 186)
```

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–ª–æ–∫–æ–≤:**
1. **–ë–ª–æ–∫ 1:** `#if UNITY_EDITOR` (—Å—Ç—Ä–æ–∫–∞ 9) ‚Üí `#endif` (—Å—Ç—Ä–æ–∫–∞ 12) ‚úÖ
2. **–ë–ª–æ–∫ 2:** `#if UNITY_EDITOR` (—Å—Ç—Ä–æ–∫–∞ 22) ‚Üí `#endif` (—Å—Ç—Ä–æ–∫–∞ 182) ‚úÖ
3. **–ë–ª–æ–∫ 3:** `#if UNITY_EDITOR` (—Å—Ç—Ä–æ–∫–∞ 188) ‚Üí `#endif` (—Å—Ç—Ä–æ–∫–∞ 398) ‚úÖ

---

## üõ°Ô∏è **–ú–ï–†–´ –ü–†–ï–î–û–¢–í–†–ê–©–ï–ù–ò–Ø**

### **1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–Ω–æ—Å—Ç–∏:**
```bash
#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∏—Ä–µ–∫—Ç–∏–≤ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

check_preprocessor_directives() {
    local file="$1"
    
    echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞: $file"
    
    # –ü–æ–¥—Å—á–µ—Ç –¥–∏—Ä–µ–∫—Ç–∏–≤
    local if_count=$(grep -c "#if\|#ifdef\|#ifndef" "$file")
    local endif_count=$(grep -c "#endif" "$file")
    
    echo "üìä –î–∏—Ä–µ–∫—Ç–∏–≤—ã #if: $if_count"
    echo "üìä –î–∏—Ä–µ–∫—Ç–∏–≤—ã #endif: $endif_count"
    
    if [ $if_count -ne $endif_count ]; then
        echo "‚ùå –û–®–ò–ë–ö–ê: –ù–µ–ø–∞—Ä–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞!"
        echo "   #if: $if_count, #endif: $endif_count"
        return 1
    else
        echo "‚úÖ –í—Å–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –ø–∞—Ä–Ω—ã–µ"
        return 0
    fi
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö C# —Ñ–∞–π–ª–æ–≤
find Assets/Scripts -name "*.cs" -exec bash -c 'check_preprocessor_directives "$0"' {} \;
```

### **2. Pre-commit hook:**
```bash
#!/bin/bash
# .git/hooks/pre-commit

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Ä–µ–∫—Ç–∏–≤ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞..."

error_count=0
for file in $(git diff --cached --name-only --diff-filter=ACM | grep "\.cs$"); do
    if_count=$(grep -c "#if\|#ifdef\|#ifndef" "$file" 2>/dev/null || echo "0")
    endif_count=$(grep -c "#endif" "$file" 2>/dev/null || echo "0")
    
    if [ $if_count -ne $endif_count ]; then
        echo "‚ùå $file: –ù–µ–ø–∞—Ä–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ ($if_count #if, $endif_count #endif)"
        error_count=$((error_count + 1))
    fi
done

if [ $error_count -gt 0 ]; then
    echo "üö´ –ö–æ–º–º–∏—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω: $error_count —Ñ–∞–π–ª–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏ –¥–∏—Ä–µ–∫—Ç–∏–≤ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞"
    exit 1
fi

echo "‚úÖ –í—Å–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã"
```

### **3. –ü—Ä–∞–≤–∏–ª–∞ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è:**

#### **–°—Ç–∞–Ω–¥–∞—Ä—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è:**
```csharp
#if UNITY_EDITOR
    // Editor-specific code
    [MenuItem("MyMenu/Command")]
    public static void MyCommand()
    {
        // Implementation
    }
#endif // UNITY_EDITOR
```

#### **–ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:**
- ‚ùå –í–ª–æ–∂–µ–Ω–Ω—ã–µ `#if` –±–µ–∑ —á–µ—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚ùå `#if` –±–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ `#endif`
- ‚ùå –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–∏–≤ `#endif`

#### **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:**
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∞: `#endif // UNITY_EDITOR`
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ editor-–∫–æ–¥–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `#region` –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

### **4. IDE –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

#### **Visual Studio Code:**
```json
{
    "editor.bracketPairColorization.enabled": true,
    "editor.guides.bracketPairs": true,
    "C_Cpp.intelliSenseEngine": "default"
}
```

#### **Unity Editor:**
- –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è C#

---

## üìä **–ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê**

### **–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ü–æ–¥—Å—á–µ—Ç –¥–∏—Ä–µ–∫—Ç–∏–≤ –≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ
grep -c "#if\|#ifdef\|#ifndef" Assets/Scripts/Core/AI/UnityAIAssistant.cs  # 3
grep -c "#endif" Assets/Scripts/Core/AI/UnityAIAssistant.cs                 # 4
```

### **–°—Ç–∞—Ç—É—Å –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:**
- ‚úÖ **CS1027:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ **–ö–æ–º–ø–∏–ª—è—Ü–∏—è:** –£—Å–ø–µ—à–Ω–∞—è
- ‚úÖ **Linter Errors:** 0 –æ—à–∏–±–æ–∫

---

## üéØ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

**–í—Å–µ –æ—à–∏–±–∫–∏ CS1027 —É—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!** 

–ü—Ä–∏–º–µ–Ω–µ–Ω—ã –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –º–µ—Ä—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø–æ–¥–æ–±–Ω—ã—Ö –æ—à–∏–±–æ–∫ –≤ –±—É–¥—É—â–µ–º:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏
- Pre-commit hooks
- –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- IDE –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–ü—Ä–æ–µ–∫—Ç Mud-Like –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É —Å –Ω—É–ª–µ–≤—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!** üöÄ
