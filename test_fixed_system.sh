#!/bin/bash

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∑–∞—â–∏—Ç—ã –æ—Ç –ø–µ—Ä–µ–≥—Ä–µ–≤–∞
# –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –±–µ–∑ –¥–µ–π—Å—Ç–≤–∏–π

echo "üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ù–û–ô –°–ò–°–¢–ï–ú–´ –ó–ê–©–ò–¢–´ –û–¢ –ü–ï–†–ï–ì–†–ï–í–ê"
echo "=================================================="

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
source ./overheat_protection.sh

echo ""
echo "üîç –≠–¢–ê–ü 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–±–µ–∑–æ–ø–∞—Å–Ω–æ)"
echo "--------------------------------------------------"

# –¢–µ—Å—Ç 1: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã CPU
echo "1Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã CPU..."
cpu_temp=$(get_cpu_temperature)
echo "   –†–µ–∑—É–ª—å—Ç–∞—Ç: ${cpu_temp}¬∞C"

# –¢–µ—Å—Ç 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ CPU
echo "2Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ CPU..."
cpu_load=$(get_cpu_load)
echo "   –†–µ–∑—É–ª—å—Ç–∞—Ç: ${cpu_load}%"

# –¢–µ—Å—Ç 3: –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ GPU
echo "3Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ GPU..."
gpu_load=$(get_gpu_load)
echo "   –†–µ–∑—É–ª—å—Ç–∞—Ç: ${gpu_load}%"

# –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ Unity Editor
echo "4Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ Unity Editor..."
unity_running=$(is_unity_editor_running)
echo "   Unity Editor –∑–∞–ø—É—â–µ–Ω: ${unity_running}"

# –¢–µ—Å—Ç 5: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ
echo "5Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏..."
system_info=$(get_system_info)
echo "   –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∞: ${#system_info} —Å–∏–º–≤–æ–ª–æ–≤"

echo ""
echo "üîç –≠–¢–ê–ü 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –±–µ–∑ –¥–µ–π—Å—Ç–≤–∏–π"
echo "--------------------------------------------"

# –¢–µ—Å—Ç 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
echo "6Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π..."
echo "   CPU –ø–æ—Ä–æ–≥: ${MAX_CPU_LOAD_THRESHOLD}%"
echo "   GPU –ø–æ—Ä–æ–≥: ${MAX_GPU_LOAD_THRESHOLD}%"
echo "   Unity CPU –ª–∏–º–∏—Ç: ${UNITY_EDITOR_CPU_LIMIT}%"
echo "   Unity GPU –ª–∏–º–∏—Ç: ${UNITY_EDITOR_GPU_LIMIT}%"

# –¢–µ—Å—Ç 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
echo "7Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤..."
echo "   –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è: ${MIN_LOAD_REDUCTION_INTERVAL}—Å"
echo "   –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã: ${TEMP_CHECK_INTERVAL}—Å"

echo ""
echo "üîç –≠–¢–ê–ü 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è"
echo "----------------------------------------------"

# –¢–µ—Å—Ç 8: –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ (—Ç–æ–ª—å–∫–æ –ª–æ–≥–∏–∫–∞)
echo "8Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏..."
if [ "$cpu_load" -ge "$MAX_CPU_LOAD_THRESHOLD" ] || [ "$gpu_load" -ge "$MAX_GPU_LOAD_THRESHOLD" ]; then
    echo "   ‚ö†Ô∏è  –ù–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ø–æ—Ä–æ–≥ (–ù–ï –í–´–ü–û–õ–ù–Ø–ï–ú –î–ï–ô–°–¢–í–ò–Ø)"
else
    echo "   ‚úÖ –ù–∞–≥—Ä—É–∑–∫–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã"
fi

# –¢–µ—Å—Ç 9: –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Unity Editor
echo "9Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ Unity Editor..."
if [ "$unity_running" = "true" ]; then
    if [ "$cpu_load" -ge "$UNITY_EDITOR_CPU_LIMIT" ] || [ "$gpu_load" -ge "$UNITY_EDITOR_GPU_LIMIT" ]; then
        echo "   ‚ö†Ô∏è  Unity Editor –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç (–ù–ï –í–´–ü–û–õ–ù–Ø–ï–ú –î–ï–ô–°–¢–í–ò–Ø)"
    else
        echo "   ‚úÖ Unity Editor –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ª–∏–º–∏—Ç–∞"
    fi
else
    echo "   ‚ÑπÔ∏è  Unity Editor –Ω–µ –∑–∞–ø—É—â–µ–Ω"
fi

echo ""
echo "‚úÖ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û –ë–ï–ó–û–ü–ê–°–ù–û"
echo "=================================="
echo "–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ"
echo "–ù–∏–∫–∞–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –Ω–µ –±—ã–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ"