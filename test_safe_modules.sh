#!/bin/bash

# üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ë–ï–ó–û–ü–ê–°–ù–´–• –ú–û–î–£–õ–ï–ô –°–ò–°–¢–ï–ú–´ –ó–ê–©–ò–¢–´ –û–¢ –ü–ï–†–ï–ì–†–ï–í–ê
# –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –Ω–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º—ã

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
NC='\033[0m' # No Color

echo -e "${BLUE}üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ë–ï–ó–û–ü–ê–°–ù–´–• –ú–û–î–£–õ–ï–ô –°–ò–°–¢–ï–ú–´ –ó–ê–©–ò–¢–´ –û–¢ –ü–ï–†–ï–ì–†–ï–í–ê${NC}"
echo -e "${BLUE}================================================================${NC}"
echo

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
source ./overheat_protection.sh

# –¢–ï–°–¢ 1: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU –Ω–∞–≥—Ä—É–∑–∫–∏
echo -e "${CYAN}üîç –¢–ï–°–¢ 1: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU –Ω–∞–≥—Ä—É–∑–∫–∏${NC}"
echo "----------------------------------------"
cpu_load=$(get_cpu_load)
echo "CPU Load: ${cpu_load}%"
if [ "$cpu_load" -ge 0 ] && [ "$cpu_load" -le 100 ]; then
    echo -e "${GREEN}‚úÖ CPU –Ω–∞–≥—Ä—É–∑–∫–∞ –≤ –¥–æ–ø—É—Å—Ç–∏–º–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ (0-100%)${NC}"
else
    echo -e "${RED}‚ùå CPU –Ω–∞–≥—Ä—É–∑–∫–∞ –≤–Ω–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞${NC}"
fi
echo

# –¢–ï–°–¢ 2: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ GPU –Ω–∞–≥—Ä—É–∑–∫–∏
echo -e "${CYAN}üîç –¢–ï–°–¢ 2: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ GPU –Ω–∞–≥—Ä—É–∑–∫–∏${NC}"
echo "----------------------------------------"
gpu_load=$(get_gpu_load)
echo "GPU Load: ${gpu_load}%"
if [ "$gpu_load" -ge 0 ] && [ "$gpu_load" -le 100 ]; then
    echo -e "${GREEN}‚úÖ GPU –Ω–∞–≥—Ä—É–∑–∫–∞ –≤ –¥–æ–ø—É—Å—Ç–∏–º–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ (0-100%)${NC}"
else
    echo -e "${RED}‚ùå GPU –Ω–∞–≥—Ä—É–∑–∫–∞ –≤–Ω–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞${NC}"
fi
echo

# –¢–ï–°–¢ 3: –û—Ü–µ–Ω–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
echo -e "${CYAN}üîç –¢–ï–°–¢ 3: –û—Ü–µ–Ω–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã${NC}"
echo "----------------------------------------"
temp=$(get_cpu_temperature)
echo "CPU Temperature: ${temp}¬∞C"
if [ "$temp" -ge 0 ] && [ "$temp" -le 200 ]; then
    echo -e "${GREEN}‚úÖ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –¥–æ–ø—É—Å—Ç–∏–º–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ (0-200¬∞C)${NC}"
else
    echo -e "${RED}‚ùå –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–Ω–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞${NC}"
fi
echo

# –¢–ï–°–¢ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ Unity Editor
echo -e "${CYAN}üîç –¢–ï–°–¢ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ Unity Editor${NC}"
echo "----------------------------------------"
unity_running=$(is_unity_editor_running)
echo "Unity Editor running: ${unity_running}"
if [ "$unity_running" = "true" ] || [ "$unity_running" = "false" ]; then
    echo -e "${GREEN}‚úÖ –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Unity Editor —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
else
    echo -e "${RED}‚ùå –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Unity Editor —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
fi
echo

# –¢–ï–°–¢ 5: –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
echo -e "${CYAN}üîç –¢–ï–°–¢ 5: –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è${NC}"
echo "----------------------------------------"
echo "System Info:"
get_system_info
echo

# –¢–ï–°–¢ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä–æ–≥–æ–≤
echo -e "${CYAN}üîç –¢–ï–°–¢ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä–æ–≥–æ–≤${NC}"
echo "----------------------------------------"
echo "Unity Editor CPU Limit: ${UNITY_EDITOR_CPU_LIMIT}%"
echo "Unity Editor GPU Limit: ${UNITY_EDITOR_GPU_LIMIT}%"
echo "Max CPU Load Threshold: ${MAX_CPU_LOAD_THRESHOLD}%"
echo "Max GPU Load Threshold: ${MAX_GPU_LOAD_THRESHOLD}%"
echo "Critical Temp Threshold: ${CRITICAL_TEMP_THRESHOLD}¬∞C"
echo "Warning Temp Threshold: ${WARNING_TEMP_THRESHOLD}¬∞C"
echo "Safe Temp Threshold: ${SAFE_TEMP_THRESHOLD}¬∞C"
echo

# –¢–ï–°–¢ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏ –±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–µ—Ä
echo -e "${CYAN}üîç –¢–ï–°–¢ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏ –±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–µ—Ä${NC}"
echo "----------------------------------------"
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ Unity Editor –ª–æ–≥–∏–∫–∏:"
if [ "$unity_running" = "true" ]; then
    if [ "$cpu_load" -gt "$UNITY_EDITOR_CPU_LIMIT" ] || [ "$gpu_load" -gt "$UNITY_EDITOR_GPU_LIMIT" ]; then
        echo -e "${YELLOW}‚ö†Ô∏è  Unity Editor –ø—Ä–µ–≤—ã—Å–∏–ª –ª–∏–º–∏—Ç—ã (–Ω–æ –º–µ—Ä—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è)${NC}"
    else
        echo -e "${GREEN}‚úÖ Unity Editor –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ª–∏–º–∏—Ç–æ–≤${NC}"
    fi
else
    echo -e "${BLUE}‚ÑπÔ∏è  Unity Editor –Ω–µ –∑–∞–ø—É—â–µ–Ω${NC}"
fi

echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –ª–æ–≥–∏–∫–∏:"
if [ "$cpu_load" -ge "$MAX_CPU_LOAD_THRESHOLD" ] || [ "$gpu_load" -ge "$MAX_GPU_LOAD_THRESHOLD" ]; then
    echo -e "${YELLOW}‚ö†Ô∏è  –î–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–Ω–æ –º–µ—Ä—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è)${NC}"
else
    echo -e "${GREEN}‚úÖ –ù–∞–≥—Ä—É–∑–∫–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã${NC}"
fi

echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–æ–π –ª–æ–≥–∏–∫–∏:"
if [ "$temp" -ge "$CRITICAL_TEMP_THRESHOLD" ]; then
    echo -e "${YELLOW}‚ö†Ô∏è  –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (–Ω–æ –º–µ—Ä—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è)${NC}"
elif [ "$temp" -ge "$WARNING_TEMP_THRESHOLD" ]; then
    echo -e "${YELLOW}‚ö†Ô∏è  –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (–Ω–æ –º–µ—Ä—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è)${NC}"
elif [ "$temp" -ge "$SAFE_TEMP_THRESHOLD" ]; then
    echo -e "${YELLOW}‚ö†Ô∏è  –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (–Ω–æ –º–µ—Ä—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è)${NC}"
else
    echo -e "${GREEN}‚úÖ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –Ω–æ—Ä–º–µ${NC}"
fi
echo

# –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢
echo -e "${PURPLE}üìä –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢ –ë–ï–ó–û–ü–ê–°–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø${NC}"
echo -e "${PURPLE}==========================================${NC}"
echo -e "${GREEN}‚úÖ –í—Å–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–æ–¥—É–ª–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã${NC}"
echo -e "${GREEN}‚úÖ –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ –Ω–µ –≤–Ω–µ—Å–µ–Ω–æ${NC}"
echo -e "${GREEN}‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ${NC}"
echo -e "${BLUE}‚ÑπÔ∏è  –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —É–º–µ—Ä–µ–Ω–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π${NC}"
echo