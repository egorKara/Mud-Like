# üîß ECS Conflict Resolution - –†–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ Unity ECS

## üéØ **–ü–†–û–ë–õ–ï–ú–ê**

### **–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏**
Unity ECS source generators —Å–æ–∑–¥–∞–≤–∞–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–µ–Ω —Å –∫–ª–∞—Å—Å–æ–º `MudLikeObjectPool`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–ª—Å—è –æ—Ç `SystemBase`.

### **–ö–æ—Ä–Ω–µ–≤—ã–µ –ø—Ä–∏—á–∏–Ω—ã**
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Object Pooling –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ECS —Å–∏—Å—Ç–µ–º–æ–π
2. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–µ–Ω**: Unity –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å—ã —Å –ø–æ—Ö–æ–∂–∏–º–∏ –∏–º–µ–Ω–∞–º–∏
3. **–°–º–µ—à–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π**: ECS —Å–∏—Å—Ç–µ–º—ã –∏ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Ä–µ—Å—É—Ä—Å–æ–≤ - —Ä–∞–∑–Ω—ã–µ –≤–µ—â–∏

## ‚úÖ **–†–ï–®–ï–ù–ò–ï**

### **1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**
- **`MudLikeMemoryPool`** - –æ–±—ã—á–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É–ª–æ–º –ø–∞–º—è—Ç–∏
- **`MemoryPoolSystem`** - ECS —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Unity ECS

### **2. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
```csharp
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - Object Pool –∫–∞–∫ ECS —Å–∏—Å—Ç–µ–º–∞
public class MudLikeObjectPool : SystemBase

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - Object Pool –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –∫–ª–∞—Å—Å
public class MudLikeMemoryPool
{
    public void Initialize() { }
    public void Dispose() { }
    public void Update() { }
}

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - ECS —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
public partial class MemoryPoolSystem : SystemBase
{
    private MudLikeMemoryPool _memoryPool;
}
```

### **3. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è**
- **–ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏–º–µ–Ω** - Unity –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –∫–ª–∞—Å—Å—ã
- **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ** - ECS —Å–∏—Å—Ç–µ–º—ã –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–ª –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç ECS
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Unity ECS

## üèóÔ∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê**

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤**
```
Assets/Scripts/Core/Performance/
‚îú‚îÄ‚îÄ ObjectPoolManager.cs      # MudLikeMemoryPool - –º–µ–Ω–µ–¥–∂–µ—Ä –ø—É–ª–∞
‚îú‚îÄ‚îÄ MemoryPoolSystem.cs       # ECS —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ PerformanceProfiler.cs    # –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

### **–ü—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**
1. **Single Responsibility** - –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –∏–º–µ–µ—Ç –æ–¥–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
2. **Separation of Concerns** - ECS –∏ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã
3. **Dependency Injection** - ECS —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä
4. **Clean Architecture** - —á–µ—Ç–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –º–µ–∂–¥—É —Å–ª–æ—è–º–∏

## üöÄ **–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï**

### **–í ECS —Å–∏—Å—Ç–µ–º–∞—Ö**
```csharp
[UpdateInGroup(typeof(FixedStepSimulationSystemGroup))]
public partial class MySystem : SystemBase
{
    protected override void OnUpdate()
    {
        var memoryPool = SystemAPI.GetSingleton<MemoryPoolSystem>().GetMemoryPool();
        var array = memoryPool.GetFloat3Array(100);
        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞
        memoryPool.ReturnFloat3Array(array);
    }
}
```

### **–í–Ω–µ ECS**
```csharp
public class MyManager : MonoBehaviour
{
    private MudLikeMemoryPool _memoryPool;
    
    void Start()
    {
        _memoryPool = new MudLikeMemoryPool();
        _memoryPool.Initialize();
    }
    
    void Update()
    {
        _memoryPool.Update();
    }
    
    void OnDestroy()
    {
        _memoryPool?.Dispose();
    }
}
```

## üìã **–ü–†–ê–í–ò–õ–ê –î–õ–Ø –ë–£–î–£–©–ï–ì–û**

### **1. –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ ECS –∫–ª–∞—Å—Å–æ–≤**
- **–°–∏—Å—Ç–µ–º—ã**: `[Name]System` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `MovementSystem`)
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: `[Name]` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Position`)
- **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã**: `[Name]Manager` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `MemoryPoolManager`)

### **2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã**
- **ECS —Å–∏—Å—Ç–µ–º—ã** - —Ç–æ–ª—å–∫–æ –¥–ª—è ECS –ª–æ–≥–∏–∫–∏
- **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** - —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ
- **Jobs** - –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π

### **3. –ò–∑–±–µ–∂–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º–µ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Unity
- –°–ª–µ–¥—É–π—Ç–µ –∫–æ–Ω–≤–µ–Ω—Ü–∏—è–º –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
- –†–∞–∑–¥–µ–ª—è–π—Ç–µ ECS –∏ –Ω–µ-ECS –∫–æ–¥
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ namespaces –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏

## üîç **–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú**

### **–ü—Ä–∏–∑–Ω–∞–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ ECS**
1. –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–º–µ–Ω
2. –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
3. –ü—Ä–æ–±–ª–µ–º—ã —Å IntelliSense
4. –û—à–∏–±–∫–∏ –≤ Unity Console

### **–°–ø–æ—Å–æ–±—ã —Ä–µ—à–µ–Ω–∏—è**
1. **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ** - –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è –∫–ª–∞—Å—Å–∞
2. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ** - —Ä–∞–∑–¥–µ–ª–∏—Ç—å ECS –∏ –Ω–µ-ECS –∫–æ–¥
3. **Namespace** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω
4. **–û—á–∏—Å—Ç–∫–∞** - –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à Unity

## üìö **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´**

- [Unity ECS Documentation](https://docs.unity3d.com/Packages/com.unity.entities@latest)
- [Source Generators Guide](https://docs.microsoft.com/en-us/dotnet/csharp/roslyn-sdk/source-generators-overview)
- [Unity Performance Best Practices](https://docs.unity3d.com/Manual/PerformanceOptimization.html)

---

**–≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É Unity ECS –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏–º–µ–Ω –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞.**
