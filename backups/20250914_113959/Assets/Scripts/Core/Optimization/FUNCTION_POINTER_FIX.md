# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ FunctionPointer –≤ BurstGenericSystem

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
**–û—à–∏–±–∫–∞:** `BurstCompiler.CompileFunctionPointer` —Ç—Ä–µ–±—É–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞

### –û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
```csharp
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
protected override IJobEntity CreateJob()
{
    return new BurstGenericJob<T>
    {
        ProcessFunction = BurstCompiler.CompileFunctionPointer<ProcessComponentDelegate<T>>(ProcessComponentBurst) // ‚ùå –û–®–ò–ë–ö–ê
    };
}

[BurstCompile]
protected abstract void ProcessComponentBurst(ref T component); // ‚ùå –≠—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ
**–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è FunctionPointer –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
```csharp
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è FunctionPointer
protected override IJobEntity CreateJob()
{
    return new BurstGenericJob<T>
    {
        ProcessFunction = GetProcessFunctionPointer() // ‚úÖ –ü–æ–ª—É—á–∞–µ–º FunctionPointer —á–µ—Ä–µ–∑ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥
    };
}

/// <summary>
/// –ü–æ–ª—É—á–∞–µ—Ç FunctionPointer –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
/// –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞—Ö –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
/// </summary>
protected abstract Unity.Burst.FunctionPointer<ProcessComponentDelegate<T>> GetProcessFunctionPointer();
```

### –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
```csharp
public abstract partial class ExampleBurstSystem<T> : BurstGenericSystem<T> where T : unmanaged, IComponentData
{
    /// <summary>
    /// –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –¥–ª—è Burst-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
    /// </summary>
    [BurstCompile]
    public static void StaticProcessComponent(ref T component)
    {
        // –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
        // –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –≤ Burst
    }
    
    /// <summary>
    /// –ü–æ–ª—É—á–∞–µ—Ç FunctionPointer –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞
    /// </summary>
    protected override Unity.Burst.FunctionPointer<ProcessComponentDelegate<T>> GetProcessFunctionPointer()
    {
        return BurstCompiler.CompileFunctionPointer<ProcessComponentDelegate<T>>(StaticProcessComponent); // ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥
    }
    
    /// <summary>
    /// Burst-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    /// </summary>
    [BurstCompile]
    protected override void ProcessComponentBurst(ref T component)
    {
        StaticProcessComponent(ref component); // ‚úÖ –î–µ–ª–µ–≥–∏—Ä—É–µ–º –∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º—É –º–µ—Ç–æ–¥—É
    }
}
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
1. **–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å** - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. **–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥
3. **FunctionPointer** - —Å–≤—è–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ —Å Burst-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º job

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - –Ω–∏–∫–∞–∫–æ–≥–æ —É–ø—Ä–æ—â–µ–Ω–∏—è
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è Burst –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –≤ Burst
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** - –∫–∞–∂–¥—ã–π –Ω–∞—Å–ª–µ–¥–Ω–∏–∫ –º–æ–∂–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
- ‚úÖ **Type safety** - –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤
- ‚úÖ **Performance** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Burst

## üìã –ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
1. **–°–æ–∑–¥–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥** —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `[BurstCompile]`
2. **–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ GetProcessFunctionPointer()** –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ FunctionPointer
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ BurstCompiler.CompileFunctionPointer()** —Å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º –º–µ—Ç–æ–¥–æ–º
4. **–î–µ–ª–µ–≥–∏—Ä—É–π—Ç–µ ProcessComponentBurst()** –∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º—É –º–µ—Ç–æ–¥—É

### ‚ùå –ò–∑–±–µ–≥–∞–π—Ç–µ
1. **–ü—Ä—è–º–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤** –≤ CompileFunctionPointer
2. **–ú–µ—Ç–æ–¥–æ–≤ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞** –≤ Burst-–∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º–æ–º –∫–æ–¥–µ
3. **–£–ø—Ä–æ—â–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** –≤–º–µ—Å—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- **FunctionPointer –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç** —Å BurstCompiler
- **–í—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞** - –Ω–∏–∫–∞–∫–æ–≥–æ —É–ø—Ä–æ—â–µ–Ω–∏—è
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–ª—É—á—à–µ–Ω–∞** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- **Performance –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Burst

### üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** —á–µ—Ä–µ–∑ Burst –∫–æ–º–ø–∏–ª—è—Ü–∏—é
- **–ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π
- **Type safety** –∏ compile-time –ø—Ä–æ–≤–µ—Ä–∫–∏
- **–°–æ–±–ª—é–¥–µ–Ω–∏–µ Unity DOTS best practices**

## üîÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ

### –î–ª—è –Ω–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º
```csharp
public partial class MyVehicleSystem : ExampleBurstSystem<VehiclePhysics>
{
    [BurstCompile]
    public static void StaticProcessComponent(ref VehiclePhysics component)
    {
        // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ VehiclePhysics
        component.Velocity += component.Acceleration * Time.fixedDeltaTime;
    }
}
```

### –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∏—Å—Ç–µ–º
1. –ù–∞—Å–ª–µ–¥—É–π—Ç–µ—Å—å –æ—Ç `ExampleBurstSystem<T>` –≤–º–µ—Å—Ç–æ `BurstGenericSystem<T>`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ `StaticProcessComponent`
3. –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ **–ò–°–ü–†–ê–í–õ–Ø–ï–¢** –æ—à–∏–±–∫–∏, **–°–û–•–†–ê–ù–Ø–ï–¢** –≤—Å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏ **–£–õ–£–ß–®–ê–ï–¢** –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å!
